<!DOCTYPE html>
<html>
<head>
  <meta charset=UTF-8>
  <title> Faceless Data-Model </title>

</head>
<body>
  <center>
    <h2>
      This is a data-model without normal browser page interface. <br>
      Use console in Developer Tools
    </h2>
  </center>

  <script>
    const dm = (()=>{
      const dm = {}

      class DBoid {}
      class Tempoid {}

      dm.classBuilder = function classBuilder(className) {
        eval('dm["'+className+'"] = class '+className+' extends DBoid {}');
      }

      return dm;
    })()

    let className = 'Ball';
    dm.classBuilder(className);
    console.log(new dm[className]);

    dm.endeavors = [];

    //var className = 'Endeavor';

    this['Endeavor'] = function (_name, _cat) {
      this.name = _name;
      this.cat  = _cat;
    }
    //Object.defineProperty(this[className], "name", { value: className });

    dm.endeavors.push(new this['Endeavor']('Разбогатеть', 'желание'));
    dm.endeavors.push(new this['Endeavor']('Стать красивее', 'мечта'));

    console.log(dm);

/*
    var response = {
      "endeavors" : {
        "class"  : "Endeavor",
        "headers": ["name", "category", "deadline"],
        "rows"   : [
          ["Разбогатеть",     "желание",  "NULL"],
          ["Стать красивее",  "мечта",    "NULL"]
        ]
      }
    }
*/

    var response_json = '{"Endeavors":{"class":"Endeavor","headers":["name","category","deadline"],"rows":[["Разбогатеть","желание","NULL"],["Стать красивее","мечта","NULL"]]}}';

    var response_obj = JSON.parse(response_json);

    console.log(response_obj);


  </script>


</body>
</html>
